<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create a Readme Summary Page for GitHub testthat and covr Outputs • covrpage</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Create a Readme Summary Page for GitHub testthat and covr Outputs">
<meta property="og:description" content="Create a Readme file to place in package test subdirectory to communicate
          with other users in more detail results of testthat and covr.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">covrpage</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.53</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/covrpage.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/yonicd/covrpage">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    

<div id="covrpage" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#covrpage" class="anchor"></a>{covrpage}</h1></div>
<p>Healthy R packages use <a href="https://github.com/r-lib/testthat">testthat</a> and <a href="https://github.com/r-lib/covr">covr</a> to develop stable packages.</p>
<p>This package extends the information that is communicated with the potential user with a cover page for the tests in the form of summary tables of results from covr and testthat.</p>
<p>The output is created in the <a href="tests" class="uri">tests</a> subdirectory as a <a href="tests/README.html">README.md</a> file so it will show up in Github browser page.</p>
<details><summary><font color="red">Example Output</font> </summary>

Coverage summary is created using the
[covr](https://github.com/r-lib/covr) package.

| Object                                             | Coverage (%) |
| :------------------------------------------------- | :----------: |
| covrpage                                           |    50.13     |
| [R/covrpage\_snapshot.R](R/covrpage_snapshot.R) |     0.00     |
| [R/map\_testthat.R](R/map_testthat.R)           |     0.00     |
| [R/tencrypt.R](R/tencrypt.R)                    |     0.00     |
| [R/use\_covrpage.R](R/use_covrpage.R)           |    63.64     |
| [R/covrpage\_checks.R](R/covrpage_checks.R)     |    64.29     |
| [R/covrpage.R](R/covrpage.R)                    |    65.79     |
| [R/badge.R](R/badge.R)                          |    66.67     |
| [R/testthat\_summary.R](R/testthat_summary.R)   |    93.55     |
| [R/create\_chunks.R](R/create_chunks.R)         |    96.00     |

<br>

Unit Test summary is created using the
[testthat](https://github.com/r-lib/testthat)
package.

|                     | file                                               | n |  time | error | failed | skipped | warning |
| ------------------- | :------------------------------------------------- | -: | ----: | ----: | -----: | ------: | ------: |
| test-check\_utils.R | [test-check\_utils.R](tests/testthat/test-check_utils.R) | 5 | 0.088 |     0 |      0 |       0 |       0 |
| test-covrfuns.R     | [test-covrfuns.R](tests/testthat/test-covrfuns.R)        | 6 | 0.096 |     0 |      0 |       0 |       0 |
| test-covrpage.R     | [test-covrpage.R](tests/testthat/test-covrpage.R)        | 1 | 3.669 |     0 |      0 |       0 |       0 |

<details closed><summary> Show Detailed Test Results
</summary>

| file                                                   | context                                                 | test                           | status | n |  time |
| :----------------------------------------------------- | :------------------------------------------------------ | :----------------------------- | :----- | -: | ----: |
| [test-check\_utils.R](tests/testthat/test-check_utils.R#L4)  | check for tests                                         | tests are detected             | PASS   | 1 | 0.017 |
| [test-check\_utils.R](tests/testthat/test-check_utils.R#L12) | check for packages                                      | packages are detected          | PASS   | 3 | 0.038 |
| [test-check\_utils.R](tests/testthat/test-check_utils.R#L22) | use covrpage                                            | test use\_covrpage             | PASS   | 1 | 0.033 |
| [test-covrfuns.R](tests/testthat/test-covrfuns.R#L5)         | check summary covr                                      | covr\_summary: standard input  | PASS   | 1 | 0.058 |
| [test-covrfuns.R](tests/testthat/test-covrfuns.R#L9)         | check summary covr                                      | covr\_summary: empty input     | PASS   | 1 | 0.001 |
| [test-covrfuns.R](tests/testthat/test-covrfuns.R#L17)        | check summary output types                              | with data: short               | PASS   | 1 | 0.021 |
| [test-covrfuns.R](tests/testthat/test-covrfuns.R#L21)        | check summary output types                              | with data: long                | PASS   | 1 | 0.014 |
| [test-covrfuns.R](tests/testthat/test-covrfuns.R#L25)        | check summary output types                              | with data: no data             | PASS   | 1 | 0.001 |
| [test-covrfuns.R](tests/testthat/test-covrfuns.R#L34)        | check covr to df                                        | covr object to df: empty input | PASS   | 1 | 0.001 |
| [test-covrpage.R](tests/testthat/test-covrpage.R#L20)        | check against remote repo that main function is working | check on remote repo           | PASS   | 1 | 3.669 |

</details><details><summary> Session Info </summary>

| Field    | Value                               |
| :------- | :---------------------------------- |
| Version  | R version 3.5.0 (2018-04-23)        |
| Platform | x86\_64-apple-darwin15.6.0 (64-bit) |
| Running  | macOS High Sierra 10.13.5           |
| Language | en\_US                              |
| Timezone | America/New\_York                   |

| Package  | Version |
| :------- | :------ |
| testthat | 2.0.0   |
| covr     | 3.1.0   |
| covrpage | 0.0.4   |

</details></details><div id="examples-of-active-use-of-covrpage-in-other-repositories" class="section level2">
<h2 class="hasAnchor">
<a href="#examples-of-active-use-of-covrpage-in-other-repositories" class="anchor"></a>Examples of active use of {covrpage} in other repositories</h2>
<ul>
<li><a href="https://github.com/hrbrmstr/slackr/tree/master/tests">{slackr}</a></li>
<li><a href="https://github.com/thinkr-open/remedy/tree/master/tests">{remedy}</a></li>
<li><a href="https://github.com/jonocarroll/mathpix/tree/master/tests">{mathpix}</a></li>
<li><a href="https://github.com/yonicd/carbonate/tree/master/tests">{carbonate}</a></li>
</ul>
</div>
<div id="package-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#package-installation" class="anchor"></a>Package Installation</h2>
<pre><code><a href="http://www.rdocumentation.org/packages/remotes/topics/install_github"># install.packages('remotes')

remotes::install_github('yonicd/covrpage')</a></code></pre>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<pre><code><a href="reference/covrpage.html"># assuming you are in your package root directory

covrpage::covrpage()

# create the covrpage and send directly to remote repository

covrpage::covrpage(auto_push = TRUE)

# assuming you are not in your package directory

covrpage::covrpage('another_directory')

# peek at an R package on a Github Repository

covrpage::covrpage_snapshot(repo = 'user/repo')</a></code></pre>
</div>
<div id="test-results-indicators" class="section level2">
<h2 class="hasAnchor">
<a href="#test-results-indicators" class="anchor"></a>Test Results Indicators</h2>
<div id="badge" class="section level3">
<h3 class="hasAnchor">
<a href="#badge" class="anchor"></a>Badge</h3>
<p>{covrpage} has its own reactive badge. After the README.md file is rendered a badge in the main README page is updated with the render date and the colour indicates the state of the tests. If you are using README.Rmd to compile the README file that is ok too, covrpage will update the rmd file and render it to update the md file for you.</p>
<ul>
<li>
<a href="https://github.com/yonicd/covrpage/tree/master/tests/README.html"><img src="https://img.shields.io/badge/covrpage-Last_Build_2018_08_26-brightgreen.svg" alt="Covrpage Summary"></a> all tests passed</li>
<li>
<a href="https://github.com/yonicd/covrpage/tree/master/tests/README.html"><img src="https://img.shields.io/badge/covrpage-Last_Build_2018_08_26-yellow.svg" alt="Covrpage Summary"></a> warning/skipped tests</li>
<li>
<a href="https://github.com/yonicd/covrpage/tree/master/tests/README.html"><img src="https://img.shields.io/badge/covrpage-Last_Build_2018_08_26-red.svg" alt="Covrpage Summary"></a> error/failed tests</li>
</ul>
<p>To create the script for the badge to paste in the root README run the following, it will locate the <code>.git</code> and fill in the information it needs to build the uri.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">covrpage<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/covrpage/topics/make_badge">make_badge</a></span>()</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">"[![Covrpage Summary](https://img.shields.io/badge/covrpage-Last_Build_2018_08_26-brightgreen.svg)](https://github.com/yonicd/covrpage/tree/master/tests/README.md)"</span></a></code></pre></div>
</div>
<div id="show-detailed-test-results" class="section level3">
<h3 class="hasAnchor">
<a href="#show-detailed-test-results" class="anchor"></a>Show Detailed Test Results</h3>
<p>If all the unit tests have passed then the table showing the detailed unit tests will be collapsed, else it will be open.</p>
</div>
<div id="links-to-tests" class="section level3">
<h3 class="hasAnchor">
<a href="#links-to-tests" class="anchor"></a>Links to Tests</h3>
<p>All files and unit tests referenced in the output tables contain links back to the relevant file in the repository. In the detailed unit tests table the links have line anchors to where the relevant expectation block begins.</p>
</div>
</div>
<div id="travis" class="section level2">
<h2 class="hasAnchor">
<a href="#travis" class="anchor"></a>Travis</h2>
<p><code>{covrpage}</code> can be deployed in Travis much the way <code>{covr::covrall}</code> is deployed. The only difference is that <code>{covrpage}</code> will push back the updated <code>README.md</code> file to the originating repository so it can be updated as part of the custom integration routine.</p>
<p>The following <code>.travis.yml</code> is needed for the deployment:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yml"><code class="sourceCode yaml"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="fu">language:</span><span class="at"> R</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="fu">sudo:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="fu">cache:</span><span class="at"> packages</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="fu">after_success:</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">-</span> <span class="fu">Rscript -e 'covr:</span><span class="at">:codecov()'</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw">-</span> bash .travis/covrpage.sh</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="fu">r_github_packages:</span><span class="at"> yonicd/covrpage</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="fu">env:</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">  <span class="fu">global:</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">    <span class="fu">secure:</span><span class="at"> </span><span class="kw">[</span>Travis encrypted Github PAT<span class="kw">]</span></a></code></pre></div>
<p>covrpage adds one new line to the standard <code>{covr}</code> Travis YML:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yml"><code class="sourceCode yaml"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">-</span> bash .travis/covrpage.sh</a></code></pre></div>
<p>This file is created when running <code><a href="reference/use_covrpage.html">covrpage::use_covrpage()</a></code> in the <code>.travis</code> subdirectory:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yml"><code class="sourceCode yaml"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="fu">env:</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  <span class="fu">global:</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">    <span class="fu">secure:</span><span class="at"> IeWrPb9tC9oxkoceXs4NStZJFIJKtvi/qeErbv3OATeo+BylRwj9xzcmzQrV8ps...</span></a></code></pre></div>
<p>To allow Travis push back into the originating repository, you will need to give it permission to do so by providing an encrypted <a href="https://github.com/settings/tokens">GitHub Personal Access Token</a> (PAT). This is done using the Travis command line <a href="https://docs.travis-ci.com/user/encryption-keys/">function</a>.</p>
<p>By default, the function assumes you have defined a system environment variable <code>GITHUB_PAT</code> and will use it to define a <a href="https://docs.travis-ci.com/user/environment-variables/">Travis environment variable</a> as <code>GH_PAT</code>.</p>
<ul>
<li>
<code>R</code> Environment Variable</li>
</ul>
<p>To define the Github PAT as an R environment variable:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">Sys.setenv</span>(<span class="dt">GITHUB_PAT=</span><span class="st">'PAT FROM GITHUB'</span>)</a></code></pre></div>
<ul>
<li>Travis Environment Variable</li>
</ul>
<p>Run the following line in the terminal when you are in the root project directory (where the <code>.git</code> folder in located), the output should be appended directly to the <code>.travis.yml</code> file. Each time you run it a new <code>secure</code> line is added to the yml.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">travis encrypt GH_PAT =<span class="st"> "[PAT FROM GITHUB]"</span> <span class="op">--</span>add</a></code></pre></div>
<p>These two commands are combined into a utility function:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">covrpage<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/covrpage/topics/tencrypt">tencrypt</a></span>(<span class="dt">r_obj =</span> <span class="kw">Sys.getenv</span>(<span class="st">"GITHUB_PAT"</span>),<span class="dt">travis_env =</span> <span class="st">"GH_PAT"</span>,<span class="dt">add =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>That’s it!</p>
<p>Any questions/comments are always welcome in the <a href="https://github.com/yonicd/covrpage/issues">issues</a> section.</p>
</div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <div class="">
<h2></h2>
<ul class="list-unstyled">
<li><img src="" alt=""></li>
</ul>
</div>
<div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/yonicd/covrpage">https://​github.com/​yonicd/​covrpage</a>
</li>
<li>Report a bug at <br><a href="https://github.com/yonicd/covrpage/issues">https://​github.com/​yonicd/​covrpage/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jonathan Sidi <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/yonicd/covrpage"><img src="https://travis-ci.org/yonicd/covrpage.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/github/yonicd/covrpage?branch=master"><img src="https://img.shields.io/codecov/c/github/yonicd/covrpage/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://github.com/yonicd/covrpage/tree/master/tests/README.html"><img src="https://img.shields.io/badge/covrpage-Last_Build_2018_08_26-brightgreen.svg" alt="Covrpage Summary"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jonathan Sidi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
